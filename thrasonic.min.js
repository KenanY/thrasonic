/*!
 * thrasonic 1.1.0
 *
 * https://github.com/KenanY/thrasonic
 *
 * by Kenan Yildirim, with original work by Zach Holman
 */(function(){var e,t;e=jQuery,e.thrasonic=function(){return t.getInstance()},e.fn.thrasonic=function(e){var n;return n=t.getInstance(),n.setOptions(e),n.boast(this),n},t=function(){function n(){}var t;return t={instantiated:null,started:null},n.prototype.setInitialOptions=function(t){var n;return n={location:location.href,limit:50,emptyMessage:"No one's mentioned this page on Twitter yet.      <a href=\"https://twitter.com?status="+location.href+'">      You could be the first</a>.',intent:"direct"},this.options=this.options||e.extend(n,t)},n.prototype.setOptions=function(t){return this.options=this.options||this.setInitialOptions(t),this.options=e.extend(this.options,t)},n.formatTweetback=function(e){var t,n,r;t='<div class="thrasonic">';switch(this.options.intent){case"reply":n='<a href="https://twitter.com/intent/tweet?in_reply_to='+e.permalink_url.split("/").pop()+'">';break;case"retweet":n='<a href="https://twitter.com/intent/retweet?tweet_id='+e.permalink_url.split("/").pop()+'">';break;case"favorite":n='<a href="https://twitter.com/intent/favorite?tweet_id='+e.permalink_url.split("/").pop()+'">';break;case"author":n='<a href="https://twitter.com/intent/user?screen_name='+e.author.url.split("/").pop()+'">';break;default:n='<a href="'+e.permalink_url+'">'}return r='        <img src="'+e.author.photo_url+'" />\n    </a>\n    <div class="thrasonic_pointer"></div>\n    <div class="thrasonic_tweet" style="display: none">\n        <div class="thrasonic_handle">@'+e.author.url.split("/").pop()+'</div>\n        <div class="thrasonic_content">'+e.content+"</div>\n    </div>\n</div>",t+n+r},n.prototype.parseRequest=function(t){var n,r;return r=e(this),n=[],t.response.list.length>0?(e.each(t.response.list,function(t,i){return e.inArray(i.author.url,n)>-1?!0:(n.push(i.author.url),r.append(this.formatTweetback(i)))}),e(".thrasonic").mouseover(function(){return e(this).children(".thrasonic_tweet, .thrasonic_pointer").show()}),e(".thrasonic").mousemove(function(t){return e(this).children(".thrasonic_tweet").css({left:e(this).position().left-105,top:e(this).position().top+25}),e(this).children(".thrasonic_pointer").css({left:e(this).position().left+18,top:e(this).position().top+15})}),e(".thrasonic").mouseout(function(){return e(this).children(".thrasonic_tweet, .thrasonic_pointer").hide()})):r.append(this.options.emptyMessage)},n.prototype.boast=function(){if(!t.started)return e.ajax({url:"http://otter.topsy.com/trackbacks.js",data:{url:this.options.location,perpage:this.options.limit},success:this.parseRequest,dataType:"jsonp"}),t.started=!0},n.getInstance=function(){return t.instantiated||(t.instantiated=new n,t.instantiated.setInitialOptions()),t.instantiated},n.prototype.free=function(){return t={},null},n}()}).call(this);